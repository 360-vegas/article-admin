<template>
  <div class="article-page">
    <!DOCTYPE html>
    <html lang="zh-CN">

    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>{{ articleData.title }} - 知识库</title>
      <meta name="description" :content="articleData.meta.description">
      <link rel="stylesheet" href="/assets/styles.css">
      <link rel="stylesheet" href="/assets/article-hero.css">
      <link rel="stylesheet" href="/assets/article-content.css">
      <!-- <script type="application/ld+json" v-html="structuredData"></script> -->
    </head>

    <body>
      <!-- 页头占位符 -->
      <div id="header-placeholder"></div>

      <!-- 文章头部区域 -->
      <section class="article-hero">
        <div class="hero-container">
          <div class="hero-content">
            <div class="hero-badge">{{ articleData.meta.hero_badge }}</div>
            <h1 class="hero-title">{{ articleData.title }}</h1>
            <p class="hero-subtitle">{{ articleData.meta.hero_subtitle }}</p>
          </div>
          <div class="hero-visual">
            <div class="hero-image">
              <div class="ai-timeline-preview" id="timeline-preview">
                <div class="timeline-years">
                  <span v-for="year in articleData.meta.timeline_years" :key="year" class="year-marker">
                    {{ year }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 面包屑导航 -->
      <nav class="breadcrumb-nav">
        <div class="breadcrumb-container">
          <ol class="breadcrumb-list">
            <li class="breadcrumb-item">
              <a href="/" class="breadcrumb-link">
                <span class="breadcrumb-icon">🏠</span>
                <span class="breadcrumb-text">首页</span>
              </a>
            </li>
            <li class="breadcrumb-separator">/</li>
            <li class="breadcrumb-item">
              <a :href="`/zh/${articleData.meta.breadcrumb_category}/`" class="breadcrumb-link">
                <span class="breadcrumb-text">{{ articleData.meta.breadcrumb_category }}</span>
              </a>
            </li>
            <li class="breadcrumb-separator">/</li>
            <li class="breadcrumb-item current">
              <span class="breadcrumb-icon">🖋️</span>
              <span class="breadcrumb-text">{{ articleData.title }}</span>
            </li>
          </ol>
        </div>
      </nav>

      <div class="wiki-layout">
        <!-- 左侧目录 -->
        <aside class="wiki-sidebar-left">
          <div class="toc">
            <h2>目录</h2>
            <ul id="toc-list">
              <li v-for="section in articleData.content.sections" :key="section.id">
                <a :href="`#${section.id}`" @click.prevent="scrollToSection(section.id)">{{ section.title }}</a>
              </li>
              <li><a href="#references" @click.prevent="scrollToSection('references')">参考文献</a></li>
            </ul>
          </div>
        </aside>

        <!-- 中间内容 -->
        <main class="wiki-content">
          <div class="article-intro">
            <p id="intro-content">{{ articleData.content.intro }}</p>
            <div class="quick-facts" v-if="articleData.stats && articleData.stats.length > 0">
              <h3>📊 关键数据</h3>
              <ul id="quick-facts-list">
                <li v-for="(stat, index) in articleData.stats" :key="index">
                  <strong>{{ stat.label }}:</strong> {{ stat.value }}
                </li>
              </ul>
            </div>
          </div>

          <div id="content-sections">
            <section v-for="section in articleData.content.sections" :key="section.id" :id="section.id"
              class="content-section">
              <h2>{{ section.title }}</h2>
              <p v-html="formatContent(section.content)"></p>
            </section>
          </div>

          <h2 id="references">参考文献</h2>
          <div class="citations">
            <ol id="references-list">
              <li v-for="(reference, index) in articleData.content.references" :key="index">
                <a :href="reference" target="_blank" rel="nofollow">{{ reference }}</a>
              </li>
            </ol>
          </div>

          <!-- 外部链接 -->
          <div v-if="articleData['external-links'] && articleData['external-links'].length > 0" class="external-links">
            <h3>外部参考</h3>
            <ul>
              <li v-for="(link, index) in articleData['external-links']" :key="index">
                <a :href="link.url" :target="link.target" :rel="link.rel">
                  {{ link.title }}
                </a>
              </li>
            </ul>
          </div>
        </main>

        <!-- 右侧信息框 -->
        <aside class="wiki-sidebar-right">
          <!-- 信息框 -->
          <div class="infobox">
            <h3 id="infobox-title">{{ articleData.infobox.type_label }}</h3>
            <table id="infobox-table">
              <tbody>
                <tr v-for="(field, index) in articleData.infobox.fields" :key="index">
                  <th>{{ field.label }}</th>
                  <td v-html="formatInfoboxValue(field.value)"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- 相关实体 -->
          <div class="related-entities">
            <h3>🔗 相关实体</h3>
            <ul id="related-entities-list">
              <li v-for="(entity, index) in articleData['related-entities']" :key="index">
                <a :href="entity.url">{{ entity.title }}</a>
              </li>
            </ul>
          </div>

          <!-- 统计信息 -->
          <div class="stats-box">
            <h3>📊 统计信息</h3>
            <ul id="stats-list">
              <li v-for="(stat, index) in articleData.stats" :key="index">
                <strong>{{ stat.label }}:</strong> {{ stat.value }}
              </li>
            </ul>
          </div>

          <!-- 相关地点 -->
          <div class="map-box">
            <h3>🗺️ 相关地点</h3>
            <div class="map-placeholder" id="map-places">
              <ul class="places-list">
                <li v-for="(place, index) in articleData.map_places" :key="index">
                  <a :href="place.url">{{ place.title }}</a>
                </li>
              </ul>
            </div>
          </div>

          <!-- 时间线 -->
          <div class="timeline-mini">
            <h3>⏰ 时间线</h3>
            <div id="timeline-content">
              <div class="mini-timeline">
                <div v-for="year in articleData.meta.timeline_years" :key="year" class="timeline-item">
                  <span class="year">{{ year }}</span>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <!-- 相关词条 -->
      <div class="related-pages">
        <h3>相关词条</h3>
        <div class="related-grid" id="related-cards">
          <div v-for="card in articleData.related_cards" :key="card.title" class="related-card">
            <div class="card-content">
              <h4>{{ card.title }}</h4>
              <p>{{ card.summary }}</p>
              <a :href="card.url" class="card-link">查看详情</a>
            </div>
          </div>
        </div>
      </div>

      <!-- 页脚占位符 -->
      <div id="footer-placeholder"></div>
    </body>

    </html>
  </div>
</template>

<script>
export default {
  name: 'ArticleTemplate',
  data() {
    return {
      articleData: {
        "title": "韩国",
        "meta": {
          "description": "关于韩国的详细介绍",
          "lang": "zh",
          "breadcrumb_category": "科学与概念",
          "hero_badge": "国别概述",
          "hero_subtitle": "韩国的详细介绍",
          "date_published": "2025-09-29",
          "date_modified": "2025-09-29",
          "url": "http://localhost:8080/wiki/zh/韩国/",
          "main_entity": {
            "type": "Concept",
            "name": "韩国",
            "description": "指朝鲜半岛南部的国家与相关概念，涵盖地理、历史、政治、经济与文化等方面的说明"
          },
          "timeline_years": [1950, 1960, 1980, 2000, 2020]
        },
        "infobox": {
          "type_label": "概念条目",
          "fields": [
            {
              "label": "名称",
              "value": "韩国（South Korea）"
            },
            {
              "label": "首都",
              "value": "首尔（Seoul）"
            },
            {
              "label": "官方语言",
              "value": "韩语"
            },
            {
              "label": "面积",
              "value": "约100,000平方千米"
            },
            {
              "label": "人口（估）",
              "value": "约5,100万（2024）"
            },
            {
              "label": "货币",
              "value": "韩元（KRW）"
            },
            {
              "label": "政体",
              "value": "总统制共和国（民主制度）"
            },
            {
              "label": "互联网顶级域",
              "value": ".kr"
            },
            {
              "label": "代表图像",
              "value": "https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg"
            }
          ]
        },
        "content": {
          "intro": "韩国指的是朝鲜半岛南部以大韩民国为主体的现代国家概念，既可指国家本身，也常用于涵盖其社会、文化、政治与经济体系。作为一个经历了战争、分裂与快速现代化的社会，韩国在二十世纪中后期完成了从农业社会向工业化、信息化社会的转型，形成强烈的国家建设逻辑与独特的现代文化表达。地理上，韩国由朝鲜半岛南部大陆与多个近海岛屿组成，四季分明，资源相对有限，因而对外贸易与产业结构调整成为其持续发展的核心策略。政治体制上，韩国实行多党制与总统制，战后在民主化与权力更迭过程中形成了较为成熟的宪政实践。经济方面，韩国以出口导向型工业化为主导，出现了以电子、造船、汽车、化学为代表的全球竞争型企业群体，同时在中小企业与创新生态上进行不断优化。社会文化领域，韩国既保留传统儒家影响与风俗，又广泛吸收全球流行文化元素，形成以韩流（K-pop、影视、饮食与美妆）为代表的强烈软实力输出。总体来看，“韩国”既是地理概念与国家名称，也代表一种近现代化进程的范式：在外部环境与内部治理间寻求平衡，通过产业升级、教育投入与国际合作来维持国家竞争力与社会韧性。",
          "sections": [
            {
              "title": "地理与行政",
              "id": "地理与行政",
              "content": "韩国位于东亚朝鲜半岛南部，北隔三八线与朝鲜民主主义人民共和国相邻，东濒日本海（韩国称东海），西临黄海，南靠朝鲜海峡。国土形态以山地与丘陵为主，平原主要分布在西南沿海与东南沿海的冲积平原，河流以洛东江（汉江）等为代表。韩国地形和气候的多样性决定了其农业与沿海渔业分布的地域差异，同时也影响人口分布与城市化模式。行政区划上，大韩民国采用中央与地方并存的体制，分为首尔特别市、釜山广域市、大邱广域市、大田广域市、光州广域市、仁川广域市、蔚山广域市、世宗特别自治市以及各道（如京畿道、江原道、忠清北道等）和济州特别自治道。首都首尔为政治、文化与金融中心，而釜山则为主要的港口与贸易枢纽。海岸线与港口资源使韩国在海洋运输与对外贸易方面具有天然优势，但有限的耕地与资源也促使国家高度依赖国际市场与进口资源来维持工业化所需的原材料与能源。区域发展政策长期在均衡增长与首都圈集中之间进行权衡，近年来通过建设创新园区、交通网络与地方产业扶持来推动均衡发展。"
            },
            {
              "title": "历史与起源",
              "id": "历史与起源",
              "content": "朝鲜半岛的历史源远流长，从古朝鲜、三国时代（高句丽、新罗、百济）到统一的新罗与高丽，再到朝鲜王朝，区域文化形成了以儒学、礼制与宗法为核心的社会结构。19世纪末至20世纪初，朝鲜半岛进入剧烈的政治与地缘变局，最终在1910年被日本帝国兼并，进入长达三十五年的殖民统治期，这一时期对社会、经济与文化产生深远影响。第二次世界大战后，半岛在冷战框架下被美苏分别占领并最终形成南北对峙，1948年南部建立大韩民国，北部建立朝鲜民主主义人民共和国。1950年至1953年的朝鲜战争对朝鲜半岛造成重大破坏，战后韩国在美国与国际援助的背景下展开重建与政治重组。20世纪后半叶，韩国经历了由威权统治向民主化的转变，1987年重要的民主化进程使得自由选举与公民权利逐步确立。与此同时，韩国通过五年计划式的国家主导工业化政策实现了经济腾飞，形成以财阀与出口导向产业为核心的现代经济体系。历史的连续性与断裂交织，使得当代韩国既承载传统文化记忆，也在全球化与现代化压力下不断自我再造。"
            },
            {
              "title": "政治体制与治理",
              "id": "政治体制与治理",
              "content": "韩国实行宪法规定的总统制共和国，国家元首为总统，负责行政领导与外交安全事务，国会为一院制（国会），负责立法与监督。司法独立以宪法法院与普通法院体系为基础，宪法法院在宪政争议与政党行为审查方面具有重要作用。政党政治在韩国呈现多样性与较高竞争性，民主化后选举制度与政党轮替逐步稳定，但政治生活仍受利益集团、媒体舆论与社会运动的强烈影响。治理层面上，韩国在公共行政、教育与产业政策方面长期采取高强度的国家协调机制，尤其在经济发展阶段形成了政府、企业与学术界紧密合作的治理模式。自21世纪以来，透明度、反腐败与公民参与成为改革重点，信息公开与电子政务在提升行政效率方面发挥重要作用。地方自治体在财政与公共服务提供上拥有一定自治权，但中央政府在国家安全、经济政策与大型基础设施项目上仍保持主导地位。韩国的治理挑战包括人口老龄化、青年就业压力、住房与地区不平衡等，需要在制度创新与社会政策调适中寻求可持续的解决路径。"
            },
            {
              "title": "经济发展与产业结构",
              "id": "经济发展与产业结构",
              "content": "战后韩国经济以高速工业化著称，从20世纪1960年代起实施出口导向的国家发展战略，政府通过引导信贷、扶持重点产业、建立出口导向型企业集团（常被称为财阀）等政策实现了制造业快速扩张。电子、半导体、汽车、造船、石化与信息技术等行业成为国民经济的支柱，三星、现代、LG等企业集团在全球市场具有显著竞争力。进入21世纪后，韩国经济面临从量的扩张转向质的提升的压力，创新驱动、服务业升级、数字经济与中小企业成长成为政策重点。韩国在研发投入、教育水平与ICT基础设施方面具有优势，促成了IT、游戏、影视与生物医药等新兴产业的崛起。同时，全球化带来的供应链依赖与贸易波动也暴露出产业链脆弱性，促使政府推动供应链多元化與关键技术自主策略。社会经济问题如收入不平等、青年就业与房价高企等，要求宏观调控、社会保障与教育培训体系配套改善，以实现包容性增长与长期可持续发展。"
            },
            {
              "title": "社会文化与日常生活",
              "id": "社会文化与日常生活",
              "content": "韩国社会在传统与现代之间呈现强烈的张力。传统文化中，儒家伦理对家庭关系、教育重视与礼仪规范长期有深刻影响。然而，都市化与现代价值观推动了生活方式、性别角色与家庭结构的转换。教育在韩国社会占据中心位置，升学竞争激烈，教育投入高；这既带来高素质的人才储备，也造成社会压力与代际困惑。流行文化方面，韩流（K-pop、电视剧、电影、综艺与美妆时尚）在全球范围内取得显著影响力，形成重要的软实力与经济价值链。饮食文化以泡菜、烤肉与各类街头小吃为代表，同时吸纳国际饮食元素。都市公共空间与消费文化活跃，便利物流与数字支付的普及加速了生活节奏的现代化。与此同时，社会议题如性别平等、劳工权益、少子化与老龄化政策成为公共讨论焦点，促使政策制定者与公民社会展开广泛对话。"
            },
            {
              "title": "语言、教育与科研",
              "id": "语言、教育与科研",
              "content": "韩语是韩国的官方语言，具有统一的文字体系——谚文（韩文），这一文字在历史上由世宗大王推广，现为现代韩语书写的基础。教育体系以普及义务教育、高等教育入学率高为特色，大学与职业教育并行，研究型大学在基础科学与工程技术研究方面具有较高产出。国家与企业在研发投入上持续加码，尤其在半导体、通讯、生物医药与绿色技术领域展现强劲的创新能力。科研生态强调产学研合作，企业研发与高校研究机构之间的互动密切，但也存在基础研究投入不足与科研人才流动压力等问题。近年来，韩国政府推动创新创业生态建设、技术转移与初创企业扶持计划，以提升中小企业与新兴企业在国际竞争中的地位。教育政策方面，除传统学科教学外，STEM教育、编程与终身学习平台获得更多政策资源，以应对数字经济下的人才需求变化。"
            },
            {
              "title": "科技、数字化与创新生态",
              "id": "科技、数字化与创新生态",
              "content": "韩国在信息通信技术（ICT）与半导体制造方面居世界前列，宽带普及率、移动网络覆盖与5G商用化速度均处于领先地位。半导体制造尤其是存储芯片的全球竞争力，成为国家经济与产业安全的关键支柱。政府与企业在人工智能、大数据、云计算与智能制造等领域进行大量投资，推动传统产业的数字化转型。创新生态以大型企业为核心，同时通过孵化器、风投与政府资助计划支持初创公司成长。虽然基础设施优势明显，但在原创性基础研究、知识产权保护与全球人才吸引方面仍面临挑战。气候变化与能源转型驱动下，绿色技术、可再生能源与电动交通也成为政策与市场共同推动的方向。总体而言，韩国的科技与创新体系具有高速度采纳与产业化能力，但需在制度设计上增强对中小企业与研究型创新的支持，以实现长期竞争力。"
            },
            {
              "title": "对外关系与安全",
              "id": "对外关系与安全",
              "content": "韩国的对外政策在地缘政治上需兼顾美、日、中等大国关系，同时处理与朝鲜的特殊安全问题。韩美同盟长期是韩国安全与外交的基石，双边在军事、训练与情报领域有深度合作。对日关系因历史问题与领土争议时有波动，但经济与技术层面的合作仍然重要。与中国的经贸往来密切，中国是韩国最大的贸易伙伴之一，而在地区秩序与安全议题上两国也存在复杂互动。朝鲜问题仍是半岛稳定的核心挑战，朝核与导弹试验、南北关系的断续对话与对抗态势，直接影响韩国的国防与外交策略。区域组织与多边框架（如东亚峰会、APEC等）为韩国提供了外交平台，而软实力（文化输出、对外援助与国际活动参与）也被视为扩展国际影响力的重要手段。总体上，韩国在维护国家安全的同时努力通过经济互依与外交对话来降低冲突风险并提升区域合作空间。"
            }
          ],
          "references": [
            "https://www.britannica.com/place/South-Korea",
            "https://www.cia.gov/the-world-factbook/countries/korea-south/",
            "https://zh.wikipedia.org/wiki/大韩民国"
          ],
          "related_links": [
            {
              "title": "朝鲜半岛",
              "url": "/wiki/zh/朝鲜半岛/"
            },
            {
              "title": "韩国历史",
              "url": "/wiki/zh/韩国历史/"
            },
            {
              "title": "首尔",
              "url": "/wiki/zh/首尔/"
            }
          ]
        },
        "stats": [
          {
            "label": "名义GDP（约）",
            "value": "约1.8万亿美元（2023）"
          },
          {
            "label": "人均GDP（约）",
            "value": "约3.5万美元（2023）"
          },
          {
            "label": "人口总数（约）",
            "value": "约5,100万"
          }
        ],
        "map_places": [
          {
            "title": "首尔（Seoul）",
            "url": "/wiki/zh/首尔/"
          }
        ],
        "related_cards": [
          {
            "title": "朝鲜",
            "url": "/wiki/zh/朝鲜/",
            "summary": "位于朝鲜半岛北部，与韩国在政治与历史上长期对峙的国家"
          },
          {
            "title": "韩流（K-pop与影视）",
            "url": "/wiki/zh/韩流/",
            "summary": "韩国现代流行文化的国际传播现象，包括音乐、影视、时尚等"
          }
        ],
        "related-entities": [
          {
            "title": "朝鲜半岛",
            "url": "/wiki/zh/朝鲜半岛/"
          },
          {
            "title": "韩国历史",
            "url": "/wiki/zh/韩国历史/"
          }
        ],
        "external-links": [
          {
            "title": "Encyclopaedia Britannica — South Korea",
            "url": "https://www.britannica.com/place/South-Korea",
            "rel": "nofollow",
            "target": "_blank"
          },
          {
            "title": "CIA World Factbook — Korea, South",
            "url": "https://www.cia.gov/the-world-factbook/countries/korea-south/",
            "rel": "nofollow",
            "target": "_blank"
          }
        ]
      }
    }
  },
  created() {
    // 在组件创建时添加结构化数据
    this.$nextTick(() => {
      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.textContent = this.structuredData;
      document.head.appendChild(script);
    })
  },
  computed: {
    structuredData() {
      const data = {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": this.articleData.title,
        "description": this.articleData.meta.description,
        "datePublished": this.articleData.meta.date_published,
        "dateModified": this.articleData.meta.date_modified,
        "url": this.articleData.meta.url,
        "mainEntity": this.articleData.meta.main_entity
      };
      return JSON.stringify(data, null, 2);
    }
  },
  mounted() {
    this.addSmoothScroll();
  },
  methods: {
    formatContent(content) {
      return content.replace(/\n/g, '<br>');
    },
    formatInfoboxValue(value) {
      if (value && value.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i)) {
        return `<img src="${value}" alt="${this.articleData.title}" style="max-width: 120px; height: auto;">`;
      }
      return value;
    },
    scrollToSection(sectionId) {
      const element = document.getElementById(sectionId);
      if (element) {
        element.scrollIntoView({
          behavior: 'smooth'
        });
      }
    },
    addSmoothScroll() {
      const links = document.querySelectorAll('a[href^="#"]');
      links.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const targetElement = document.getElementById(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth'
            });
          }
        });
      });
    }
  }
}
</script>

<style scoped>
@import url('@/assets/styles.css');
@import url('@/assets/article-hero.css');
@import url('@/assets/article-content.css');
</style>